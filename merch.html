<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Debt Culture - Join the $DEBT rebellion. Official merchandise store.">
    <meta name="keywords" content="$DEBT, Debt Culture, cryptocurrency, Solana, merch, rebellion">
    <meta name="author" content="Debt Culture">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ff5555">
    <title>Debt Culture | Merch</title>
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dpvptjn4t/image/upload/v1748445162/d53de7cc-4e1a-4f44-99c0-4442b755faed_oylcn6.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="manifest" href="/manifest.json">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: monospace;
            background: #121212;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        canvas#matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }
        canvas#matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.6;
            pointer-events: none;
        }
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
            flex: 1;
        }
        .navbar {
            position: sticky;
            top: 0;
            background: rgba(18, 18, 18, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            z-index: 1000;
            border-bottom: 1px solid #ff5555;
        }
        .navbar-links {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .navbar-logo {
            filter: drop-shadow(0 0 5px #ff5555);
        }
        .navbar-links a {
            color: #fff;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
        }
        .hover-underline {
            position: relative;
            cursor: pointer;
        }
        .hover-underline::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -3px;
            left: 0;
            background: #ff5555;
            transition: width 0.3s ease;
        }
        .hover-underline:hover::after {
            width: 100%;
        }
        .dropdown {
            position: relative;
        }
        .dropbtn {
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background: #1e1e1e;
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1000;
            border-radius: 5px;
            top: 100%;
            left: 0;
        }
        .dropdown-content a {
            color: #fff;
            padding: 12px 16px;
            display: block;
            font-size: 14px;
        }
        .dropdown-content a:hover {
            background: #ff5555;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .connect-wallet-bubble {
            background: #ff5555;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .connect-wallet-bubble:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #ff5555;
        }
        .connect-wallet-bubble.connected {
            background: #00ff00;
        }
        .connect-wallet-mobile {
            display: none;
            background: #ff5555;
            color: #fff;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            margin: 20px auto;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .connect-wallet-mobile:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #ff5555;
        }
        .connect-wallet-mobile.connected {
            background: #00ff00;
        }
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
        }
        .hamburger div {
            width: 25px;
            height: 3px;
            background: #ff5555;
            transition: all 0.3s ease;
        }
        .hamburger.active div:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        .hamburger.active div:nth-child(2) {
            opacity: 0;
        }
        .hamburger.active div:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }
        .mobile-menu {
            display: none;
            position: fixed;
            top: 60px;
            right: 0;
            background: rgba(18, 18, 18, 0.95);
            width: 200px;
            padding: 20px;
            z-index: 1000;
            border-left: 1px solid #ff5555;
            border-bottom: 1px solid #ff5555;
        }
        .mobile-menu a, .mobile-menu .expand {
            display: block;
            color: #fff;
            text-decoration: none;
            margin: 10px 0;
            font-size: 16px;
            font-weight: 600;
        }
        .mobile-dropdown {
            display: none;
            padding-left: 15px;
        }
        .mobile-dropdown a {
            font-size: 14px;
            margin: 8px 0;
        }
        .section {
            padding: 60px 20px;
            text-align: center;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        h1 {
            font-size: 48px;
            color: #ff5555;
            text-shadow: 0 0 10px #ff5555, 0 0 20px #ff5555;
            margin-bottom: 20px;
            animation: neonFlicker 1.5s infinite alternate;
        }
        @keyframes neonFlicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                text-shadow: 0 0 5px #ff5555, 0 0 10px #ff5555, 0 0 15px #ff5555, 0 0 20px #ff5555;
                opacity: 1;
            }
            20%, 24%, 55% {
                text-shadow: none;
                opacity: 0.8;
            }
        }
        .merch-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        .merch-item {
            background: #1e1e1e;
            border: 1px solid #ff5555;
            border-radius: 10px;
            padding: 20px;
            max-width: 300px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .merch-item:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #ff5555;
        }
        .merch-item img {
            max-width: 100%;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .merch-item h3 {
            font-size: 24px;
            color: #fff;
            margin-bottom: 20px;
        }
        .merch-item p {
            font-size: 18px;
            color: #fff;
            margin-bottom: 20px;
        }
        .merch-item button {
            background: #ff5555;
            color: #fff;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: not-allowed;
            font-weight: 700;
            font-size: 16px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .merch-item button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #ff5555;
        }
        .join-rebellion-container {
            text-align: center;
            margin: 40px 0;
        }
        .join-rebellion {
            background: #ff5555;
            color: #fff;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: 700;
            text-decoration: none;
            display: inline-block;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .join-rebellion:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #ff5555;
        }
        .social-bubbles {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: opacity 0.3s ease, max-height 0.3s ease;
        }
        .social-bubbles.active {
            opacity: 1;
            max-height: 100px;
        }
        .footer {
            text-align: center;
            padding: 20px;
            background: rgba(18, 18, 18, 0.9);
            border-top: 1px solid #ff5555;
            width: 100%;
        }
        .footer-link {
            color: #ff5555;
            text-decoration: none;
        }
        .footer-link:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            .navbar-links {
                display: none;
            }
            .hamburger {
                display: flex;
            }
            .connect-wallet-mobile {
                display: block;
            }
            .connect-wallet-bubble {
                display: none;
            }
            .section {
                padding: 40px 15px;
            }
            h1 {
                font-size: 36px;
            }
            .social-bubbles.active {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                opacity: 1;
                max-height: 200px;
            }
        }
        @media (max-width: 1024px) {
            .navbar-links {
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <canvas id="matrix-bg"></canvas>
    <canvas id="matrix-rain"></canvas>

    <div class="content-wrapper">
        <div class="navbar">
            <div class="navbar-links">
                <img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1748445162/d53de7cc-4e1a-4f44-99c0-4442b755faed_oylcn6.png" alt="Debt Culture logo with red text" class="navbar-logo" width="100" height="100" loading="eager">
                <a href="index.html#overview" class="hover-underline" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">Overview</a>
                <a href="index.html#roadmap" class="hover-underline" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">Roadmap</a>
                <a href="index.html#how-to-buy" class="hover-underline" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">How to Buy</a>
                <a href="index.html#community" class="hover-underline" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">Community</a>
                <a href="index.html#faq" class="hover-underline" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">FAQ</a>
                <a href="https://giphy.com/channel/AutopsyGG/debt" target="_blank" rel="noopener noreferrer" class="hover-underline" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">Memes</a>
                <div class="dropdown">
                    <div class="dropbtn hover-underline" tabindex="0" role="button" aria-label="Resources menu" style="transition: transform 0.3s ease, text-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.textShadow='none';">Resources ▼</div>
                    <div class="dropdown-content">
                        <a href="https://www.dextools.io/app/en/solana/pair-explorer/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="hover-underline">DexTools</a>
                        <a href="https://www.geckoterminal.com/solana/pools/Gdq6x3LDVsEaAv5UH2kyQ7ydptqNRitjWirsDGzaYDD8" target="_blank" rel="noopener noreferrer" class="hover-underline">GeckoTerminal</a>
                        <a href="https://dexscreener.com/solana/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="hover-underline">DexScreener</a>
                        <a href="https://rugcheck.xyz/tokens/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="hover-underline">RugCheck</a>
                        <a href="https://photon-sol.tinyastro.io/en/lp/Gdq6x3LDVsEaAv5UH2kyQ7ydptqNRitjWirsDGzaYDD8" target="_blank" rel="noopener noreferrer" class="hover-underline">Photon</a>
                        <a href="https://www.birdeye.so/token/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump?chain=solana" target="_blank" rel="noopener noreferrer" class="hover-underline">Birdeye</a>
                        <a href="https://gmgn.ai/sol/token/solscan_9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="hover-underline">GMGN</a>
                        <a href="https://raydium.io/swap/?inputMint=So11111111111111111111111111111111111111112&outputMint=9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="hover-underline">Raydium</a>
                        <a href="https://solscan.io/token/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="hover-underline">Solscan</a>
                    </div>
                </div>
                <div class="connect-wallet-bubble" id="connectWalletDesktop" role="button" aria-label="Select Wallet">
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                        <img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1748890233/Wallet_PNG_sxrfdx.png" alt="Select Wallet" width="53" height="53" loading="eager" style="margin-top: -5px; transition: transform 0.3s ease, filter 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.filter='brightness(1.2) drop-shadow(0 0 10px #ff5555)';" onmouseout="this.style.transform='scale(1)'; this.style.filter='brightness(1) drop-shadow(0 0 0 #ff5555)';">
                        <span style="color: #fff; font-size: 12px; margin-top: -5px;">Select Wallet</span>
                    </div>
                </div>
            </div>
        </div>

        <button class="connect-wallet-mobile" id="connectWalletMobile" role="button" aria-label="Select Wallet">Select Wallet</button>
        <div id="walletModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
            <div style="background-color: #1e1e1e; padding: 20px; border-radius: 10px; max-width: 300px; width: 90%; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.5);">
                <h2 style="font-size: 1.5rem; color: #ff5555; margin: 0 0 15px;">Select a Wallet</h2>
                <div id="walletList" style="display: flex; flex-direction: column; gap: 10px;"></div>
                <button onclick="closeWalletModal()" style="background: #ff5555; color: #fff; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; margin-top: 15px; transition: background-color 0.3s;" onmouseover="this.style.background='#ff7777';" onmouseout="this.style.background='#ff5555';">Close</button>
            </div>
        </div>
        <div id="walletInfo" style="display: none; position: fixed; text-align: center; padding: 10px; background-color: rgba(18, 18, 18, 0.5); backdrop-filter: blur(5px); border-radius: 8px; border: 1px solid rgba(255, 85, 85, 0.3); box-shadow: 0 0 10px rgba(255, 85, 85, 0.2); color: #fff; font-size: 0.9rem; z-index: 1100;">
            <p id="walletAddress" style="margin: 0 0 5px;">Connected: <span></span></p>
            <p id="debtBalance" style="margin: 0 0 10px;">Balance: <span>0 $DEBT</span></p>
            <button onclick="disconnectWallet()" style="background: #ff5555; color: #fff; padding: 6px 12px; border: none; border-radius: 5px; cursor: pointer; font-size: 0.8rem; font-weight: 700; transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 15px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';">Disconnect</button>
        </div>
        <div class="hamburger" onclick="toggleMenu()" role="button" aria-label="Toggle mobile menu" aria-controls="mobileMenu" aria-expanded="false" tabindex="0" onkeydown="if(event.key === 'Enter') toggleMenu()" style="transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';">
            <div></div><div></div><div></div>
        </div>
        <div class="mobile-menu" id="mobileMenu">
            <a href="index.html#overview" onclick="closeMenu()" class="hover-underline" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">Overview</a>
            <a href="index.html#roadmap" onclick="closeMenu()" class="hover-underline" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">Roadmap</a>
            <a href="index.html#how-to-buy" onclick="closeMenu()" class="hover-underline" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">How to Buy</a>
            <a href="index.html#community" onclick="closeMenu()" class="hover-underline" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">Community</a>
            <a href="index.html#faq" onclick="closeMenu()" class="hover-underline" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">FAQ</a>
            <a href="https://giphy.com/channel/AutopsyGG/debt" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">Memes</a>
            <span class="expand hover-underline" onclick="toggleDropdown()" role="button" aria-label="Toggle resources dropdown" tabindex="0" onkeydown="if(event.key === 'Enter') toggleDropdown()" style="transition: text-shadow 0.3s ease;" onmouseover="this.style.textShadow='0 0 10px #ff5555';" onmouseout="this.style.textShadow='none';">Resources ▼</span>
            <div class="mobile-dropdown" id="mobileDropdown">
                <a href="https://www.dextools.io/app/en/solana/pair-explorer/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">DexTools</a>
                <a href="https://www.geckoterminal.com/solana/pools/Gdq6x3LDVsEaAv5UH2kyQ7ydptqNRitjWirsDGzaYDD8" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">GeckoTerminal</a>
                <a href="https://dexscreener.com/solana/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">DexScreener</a>
                <a href="https://rugcheck.xyz/tokens/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">RugCheck</a>
                <a href="https://photon-sol.tinyastro.io/en/lp/Gdq6x3LDVsEaAv5UH2kyQ7ydptqNRitjWirsDGzaYDD8" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">Photon</a>
                <a href="https://www.birdeye.so/token/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump?chain=solana" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">Birdeye</a>
                <a href="https://gmgn.ai/sol/token/solscan_9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">GMGN</a>
                <a href="https://raydium.io/swap/?inputMint=So11111111111111111111111111111111111111112&outputMint=9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">Raydium</a>
                <a href="https://solscan.io/token/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="hover-underline">Solscan</a>
            </div>
        </div>

        <section id="merch" class="section">
            <h1>Merch</h1>
            <div class="merch-container">
                <div class="merch-item">
                    <img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1749663039/Trucker_kld9rv.jpg" alt="Debt Culture Trucker Hat" width="250" height="250" loading="lazy">
                    <h3>Trucker Hat</h3>
                    <p>$25.00</p>
                    <button disabled>Coming Soon</button>
                </div>
            </div>
        </section>

        <div class="join-rebellion-container">
            <a class="join-rebellion" href="https://t.me/debtculture" target="_blank" rel="noopener noreferrer" onclick="if(window.innerWidth <= 768) { toggleSocialBubbles(); return false; }" role="button" aria-label="Join Debt Culture on Telegram (toggles social media links on mobile)" aria-expanded="false" style="animation: pulseGlow 1.5s infinite ease-in-out;">Join the Rebellion</a>
            <div class="social-bubbles">
                <a href="https://x.com/debtculture" target="_blank" rel="noopener noreferrer" class="icon" aria-label="Debt Culture X profile"><img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723033/X_olwxar.png" alt="X icon" width="60" height="60" loading="lazy" style="transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';"></a>
                <a href="https://t.me/debtculture" target="_blank" rel="noopener noreferrer" class="icon" id="telegram-icon" aria-label="Debt Culture Telegram"><img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/Telegram_mvvdgw.png" alt="Telegram icon" width="60" height="60" loading="lazy" style="transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';"></a>
                <a href="https://dexscreener.com/solana/gdq6x3ldvseaav5uh2kyq7ydptqNRitjWirsDGzaYdd8" target="_blank" rel="noopener noreferrer" class="icon" aria-label="DexScreener page"><img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/Dexscreener_jt4scr.png" alt="DexScreener icon" width="60" height="60" loading="lazy" style="transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';"></a>
                <a href="https://pump.fun/coin/9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump" target="_blank" rel="noopener noreferrer" class="icon" aria-label="Pump.fun page"><img src="https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/Pumpfun_yuhaon.png" alt="Pumpfun icon" width="60" height="60" loading="lazy" style="transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 10px #ff5555';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';"></a>
            </div>
        </div>

        <footer class="footer">© 2025 by <a href="https://x.com/AutopsyT2" target="_blank" class="footer-link">Autopsy</a>. All rights reserved.</footer>
    </div>

    <script>
        if (typeof solanaWeb3 === 'undefined') { console.error('solanaWeb3 library is not loaded. Please include it via CDN.'); }
        function toggleMenu() {
            const menu = document.getElementById("mobileMenu");
            const hamburger = document.querySelector(".hamburger");
            const isOpen = menu.style.display === "block";
            menu.style.display = isOpen ? "none" : "block";
            menu.setAttribute('aria-expanded', !isOpen);
            hamburger.classList.toggle("active", !isOpen);
        }
        function closeMenu() {
            const menu = document.getElementById("mobileMenu");
            menu.style.display = "none";
            menu.setAttribute('aria-expanded', 'false');
        }
        function toggleDropdown() {
            const dropdown = document.getElementById("mobileDropdown");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        }
        function toggleSocialBubbles() {
            const container = document.querySelector('.join-rebellion-container');
            const button = document.querySelector('.join-rebellion');
            const bubbles = document.querySelector('.social-bubbles');
            if (!container || !button || !bubbles) {
                console.error('ToggleSocialBubbles: Element not found', { container, button, bubbles });
                return;
            }
            const isActive = bubbles.classList.toggle('active');
            button.classList.toggle('active', isActive);
            button.setAttribute('aria-expanded', isActive);
        }
        function initializeMatrix() {
            const canvas = document.getElementById('matrix-bg');
            const ctx = canvas.getContext('2d');
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                columns = Math.ceil(canvas.width / fontSize);
                drops.length = columns;
                for (let i = 0; i < drops.length; i++) {
                    if (!drops[i]) drops[i] = 1;
                }
            }
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            window.addEventListener('resize', resizeCanvas);
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            const fontSize = 14;
            let columns = Math.ceil(canvas.width / fontSize);
            const drops = Array(columns).fill(1);
            function draw() {
                ctx.fillStyle = 'rgba(18, 18, 18, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#ff5555';
                ctx.font = `${fontSize}px monospace`;
                for (let i = 0; i < drops.length; i++) {
                    const text = chars.charAt(Math.floor(Math.random() * chars.length));
                    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                    if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
            }
            setInterval(draw, 33);
        }
        const rainCanvas = document.getElementById('matrix-rain');
        const rainCtx = rainCanvas.getContext('2d');
        rainCanvas.height = window.innerHeight;
        rainCanvas.width = window.innerWidth;
        const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const fontSize = 14;
        const columns = rainCanvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);
        function drawRain() {
            rainCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            rainCtx.fillRect(0, 0, rainCanvas.width, rainCanvas.height);
            rainCtx.fillStyle = '#999999';
            rainCtx.font = fontSize + 'px monospace';
            drops.forEach((y, i) => {
                const text = chars.charAt(Math.floor(Math.random() * chars.length));
                rainCtx.fillText(text, i * fontSize, y * fontSize);
                if (y * fontSize > rainCanvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawRain, 50);
        window.addEventListener('resize', () => {
            rainCanvas.height = window.innerHeight;
            rainCanvas.width = window.innerWidth;
        });
        function openWalletModal() {
            const walletModal = document.getElementById('walletModal');
            const walletList = document.getElementById('walletList');
            walletList.innerHTML = '';
            const wallets = [
                { name: 'Phantom', id: 'phantom', icon: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1749488428/Phantom_Wallet_s3cahc.jpg' },
                { name: 'Solflare', id: 'solflare', icon: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1749488428/Solflare_Wallet_nxcl95.jpg' },
                { name: 'Trust', id: 'trust', icon: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1749488428/Trust_Wallet_bidtn3.jpg' }
            ];
            wallets.forEach(wallet => {
                const button = document.createElement('button');
                button.className = 'wallet-option';
                button.innerHTML = `
                    <img src="${wallet.icon}" alt="${wallet.name} icon" width="30" height="30" style="margin-right: 10px;">
                    ${wallet.name}
                `;
                button.style.cssText = 'display: flex; align-items: center; justify-content: center; padding: 10px; width: 100%; background: #333; color: #fff; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; transition: background-color 0.3s;';
                button.onmouseover = () => button.style.background = '#ff5555';
                button.onmouseout = () => button.style.background = '#333';
                button.onclick = () => connectWallet(wallet.id);
                walletList.appendChild(button);
            });
            walletModal.style.display = 'flex';
        }
        function closeWalletModal() {
            const walletModal = document.getElementById('walletModal');
            walletModal.style.display = 'none';
        }
        async function connectWallet(walletId) {
            const mobileButton = document.getElementById('connectWalletMobile');
            const desktopBubble = document.getElementById('connectWalletDesktop');
            const walletInfo = document.getElementById('walletInfo');
            const walletAddressEl = document.getElementById('walletAddress').querySelector('span');
            const debtBalanceEl = document.getElementById('debtBalance').querySelector('span');
            closeWalletModal();
            try {
                let provider = null;
                let walletName = 'Unknown Wallet';
                const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent);
                const isInAppBrowser = navigator.userAgent.includes('Phantom') || navigator.userAgent.includes('Solflare') || navigator.userAgent.includes('TrustWallet');
                const deepLinks = {
                    phantom: 'phantom://',
                    solflare: 'solflare://',
                    trust: 'trust://'
                };
                const downloadUrls = {
                    phantom: 'https://phantom.app/download',
                    solflare: 'https://solflare.com/download',
                    trust: 'https://trustwallet.com/download'
                };
                if (isMobile && !isInAppBrowser) {
                    const wallet = wallets.find(w => w.id === walletId);
                    const deepLink = deepLinks[walletId];
                    const prompt = `Connect with ${wallet.name}?`;
                    if (confirm(prompt)) {
                        window.location.href = deepLink;
                        setTimeout(() => {
                            if (document.hasFocus()) {
                                window.open(downloadUrls[walletId], '_blank');
                            }
                        }, 1000);
                    }
                    return;
                }
                if (walletId === 'phantom' && (window.solana?.isPhantom || (isInAppBrowser && navigator.userAgent.includes('Phantom')))) {
                    provider = window.solana;
                    walletName = 'Phantom';
                } else if (walletId === 'solflare' && (window.solflare?.isSolflare || (isInAppBrowser && navigator.userAgent.includes('Solflare')))) {
                    provider = window.solflare;
                    walletName = 'Solflare';
                } else if (walletId === 'trust' && (window.trustWallet || window.trustwallet || window.ethereum || (isInAppBrowser && navigator.userAgent.includes('TrustWallet')))) {
                    provider = window.trustWallet || window.trustwallet || window.ethereum;
                    walletName = 'Trust';
                } else {
                    const wallet = wallets.find(w => w.id === walletId);
                    const prompt = `No ${wallet.name} detected. Install it now?`;
                    if (confirm(prompt)) {
                        window.open(downloadUrls[walletId], '_blank');
                    }
                    return;
                }
                let publicKey;
                try {
                    if (walletId === 'solflare') {
                        await provider.connect();
                        publicKey = provider.publicKey?.toString();
                    } else if (walletId === 'trust') {
                        const response = await provider.request({ method: 'connect' });
                        publicKey = response.publicKey?.toString() || provider.publicKey?.toString();
                    } else {
                        const response = await provider.request({ method: 'connect' });
                        publicKey = response.publicKey?.toString() || provider.publicKey?.toString();
                    }
                } catch (err) {
                    throw new Error(`${walletName} connection failed: ${err.message}`);
                }
                if (!publicKey) {
                    throw new Error('Failed to retrieve public key');
                }
                if (mobileButton) {
                    mobileButton.textContent = `${walletName} Connected`;
                    mobileButton.classList.add('connected');
                }
                if (desktopBubble) {
                    desktopBubble.classList.add('connected');
                    const span = desktopBubble.querySelector('span');
                    span.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                }
                walletAddressEl.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                walletInfo.style.display = 'block';
                localStorage.setItem('walletAddress', publicKey);
                localStorage.setItem('walletType', walletId);
                const balance = await getDebtBalance(publicKey);
                debtBalanceEl.textContent = balance;
                provider.on('accountChanged', async (newPublicKey) => {
                    if (newPublicKey) {
                        const newKey = newPublicKey.toString();
                        walletAddressEl.textContent = `${newKey.slice(0, 4)}...${newKey.slice(-4)}`;
                        localStorage.setItem('walletAddress', newKey);
                        const balance = await getDebtBalance(newKey);
                        debtBalanceEl.textContent = balance;
                    } else {
                        disconnectWallet();
                    }
                });
            } catch (error) {
                console.error('Error connecting wallet:', error);
                alert(`Failed to connect ${walletName}. Ensure your wallet is unlocked and try again.`);
            }
        }
        async function disconnectWallet() {
            const mobileButton = document.getElementById('connectWalletMobile');
            const desktopBubble = document.getElementById('connectWalletDesktop');
            const walletInfo = document.getElementById('walletInfo');
            const walletType = localStorage.getItem('walletType');
            try {
                let provider = null;
                if (walletType === 'phantom' && window.solana?.isPhantom) {
                    provider = window.solana;
                } else if (walletType === 'solflare' && window.solflare?.isSolflare) {
                    provider = window.solflare;
                } else if (walletType === 'trust' && (window.trustWallet || window.trustwallet || window.ethereum)) {
                    provider = window.trustWallet || window.trustwallet || window.ethereum;
                }
                if (provider && provider.disconnect) {
                    await provider.disconnect();
                }
                if (mobileButton) {
                    mobileButton.textContent = 'Select Wallet';
                    mobileButton.classList.remove('connected');
                }
                if (desktopBubble) {
                    desktopBubble.classList.remove('connected');
                    const span = desktopBubble.querySelector('span');
                    span.textContent = 'Select Wallet';
                }
                walletInfo.style.display = 'none';
                localStorage.removeItem('walletAddress');
                localStorage.removeItem('walletType');
            } catch (error) {
                console.error('Error disconnecting wallet:', error);
                alert('Failed to disconnect wallet. Please try again.');
            }
        }
        async function getDebtBalance(publicKey) {
            try {
                if (typeof solanaWeb3 === 'undefined') {
                    console.error('solanaWeb3 is not loaded');
                    return '0 $DEBT';
                }
                const connection = new solanaWeb3.Connection('https://api.mainnet-beta.solana.com', 'confirmed');
                const tokenMintAddress = new solanaWeb3.PublicKey('9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump');
                const owner = new solanaWeb3.PublicKey(publicKey);
                const response = await connection.getTokenAccountsByOwner(owner, { mint: tokenMintAddress });
                let balance = 0;
                if (response.value.length > 0) {
                    const accountInfo = await connection.getAccountInfo(response.value[0].pubkey);
                    if (accountInfo && accountInfo.data) {
                        const parsedData = new Uint8Array(accountInfo.data);
                        const amount = parsedData.slice(64, 72);
                        const amountBigInt = new DataView(amount.buffer).getBigUint64(0, true);
                        balance = Number(amountBigInt) / Math.pow(10, 6);
                    }
                }
                const formattedBalance = balance.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                return `${formattedBalance} $DEBT`;
            } catch (error) {
                console.error('Error fetching $DEBT balance:', error.message);
                return '0 $DEBT';
            }
        }
        window.addEventListener('load', async () => {
            initializeMatrix();
            const mobileButton = document.getElementById('connectWalletMobile');
            const desktopBubble = document.getElementById('connectWalletDesktop');
            mobileButton.addEventListener('click', () => {
                if (mobileButton.classList.contains('connected')) {
                    document.getElementById('walletInfo').style.display = 'block';
                } else {
                    openWalletModal();
                }
            });
            desktopBubble.addEventListener('click', () => {
                if (desktopBubble.classList.contains('connected')) {
                    document.getElementById('walletInfo').style.display = 'block';
                } else {
                    openWalletModal();
                }
            });
            try {
                const walletType = localStorage.getItem('walletType');
                const walletAddress = localStorage.getItem('walletAddress');
                if (walletType && walletAddress) {
                    let provider = null;
                    let walletName = 'Unknown Wallet';
                    if (walletType === 'phantom' && window.solana?.isPhantom) {
                        provider = window.solana;
                        walletName = 'Phantom';
                    } else if (walletType === 'solflare' && window.solflare?.isSolflare) {
                        provider = window.solflare;
                        walletName = 'Solflare';
                    } else if (walletType === 'trust' && (window.trustWallet || window.trustwallet || window.ethereum)) {
                        provider = window.trustWallet || window.trustwallet || window.ethereum;
                        walletName = 'Trust';
                    }
                    if (provider) {
                        let publicKey;
                        if (walletType === 'solflare') {
                            await provider.connect({ onlyIfTrusted: true });
                            publicKey = provider.publicKey?.toString();
                        } else {
                            const response = await provider.request({ method: 'connect', params: { onlyIfTrusted: true } });
                            publicKey = response.publicKey?.toString() || provider.publicKey?.toString();
                        }
                        if (publicKey && publicKey === walletAddress) {
                            const walletInfo = document.getElementById('walletInfo');
                            const walletAddressEl = document.getElementById('walletAddress').querySelector('span');
                            const debtBalanceEl = document.getElementById('walletInfo').querySelector('#debtBalance span');
                            mobileButton.textContent = `${walletName} Connected`;
                            mobileButton.classList.add('connected');
                            desktopBubble.classList.add('connected');
                            desktopBubble.querySelector('span').textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                            walletAddressEl.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                            walletInfo.style.display = 'none';
                            const balance = await getDebtBalance(publicKey);
                            debtBalanceEl.textContent = balance;
                        }
                    }
                }
            } catch (error) {
                console.error('Error restoring wallet connection:', error);
            }
            document.querySelector('.section').classList.add('visible');
        });
    </script>
</body>

<script>
window.ethereum = undefined;

function toggleMenu() {
    const menu = document.getElementById("mobileMenu");
    const hamburger = document.querySelector(".hamburger");
    const isOpen = menu.style.display === "block";
    menu.style.display = isOpen ? "none" : "block";
    menu.setAttribute('aria-expanded', !isOpen);
    hamburger.classList.toggle("active", !isOpen);
}

function closeMenu() {
    const menu = document.getElementById("mobileMenu");
    menu.style.display = "none";
    menu.setAttribute('aria-expanded', 'false');
}

function toggleDropdown() {
    const dropdown = document.getElementById("mobileDropdown");
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
}

function scrollToSection(selector) {
    const element = document.querySelector(selector);
    const headerOffset = 60; // Adjust for fixed header height
    const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
    const offsetPosition = elementPosition - headerOffset;
    window.scrollTo({
        top: offsetPosition,
        behavior: 'smooth'
    });
}

function toggleAccordion(header) {
    const content = header.nextElementSibling;
    const isActive = content.classList.contains('active');
    
    document.querySelectorAll('.accordion-content').forEach(item => {
        item.classList.remove('active');
        item.style.maxHeight = '0';
        item.style.padding = '0 15px';
        item.previousElementSibling.classList.remove('active', 'pulse');
        item.previousElementSibling.setAttribute('aria-expanded', 'false');
    });
    
    if (!isActive) {
        content.classList.add('active');
        content.style.maxHeight = `${content.scrollHeight + 30}px`;
        content.style.padding = '15px';
        header.classList.add('active', 'pulse');
        header.setAttribute('aria-expanded', 'true');
        setTimeout(() => header.classList.remove('pulse'), 1000);
    }
}

window.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('.section');
    const connectors = document.querySelectorAll('.section-connector');
    const windowHeight = window.innerHeight;
    const isMobile = window.innerWidth <= 768;

    sections.forEach(section => {
        const sectionTop = section.getBoundingClientRect().top;
        const sectionBottom = section.getBoundingClientRect().bottom;
        if (sectionTop < windowHeight * 0.75 && sectionBottom > 0) {
            section.classList.add('visible');
            if (section.id === 'roadmap') {
                const phases = section.querySelectorAll('.phase, .future-teaser');
                phases.forEach(phase => {
                    const phaseTop = phase.getBoundingClientRect().top;
                    if (phaseTop < windowHeight * 0.85) {
                        phase.classList.add('visible');
                    }
                });
            }
            if (section.id === 'how-to-buy') {
                const steps = section.querySelectorAll('.buy-step');
                steps.forEach(step => step.classList.add('visible'));
            }
            if (section.id === 'faq') {
                section.classList.add('visible');
            }
        }
    });

    connectors.forEach(connector => {
        const connectorTop = connector.getBoundingClientRect().top;
        const connectorBottom = connector.getBoundingClientRect().bottom;
        if (connectorTop < windowHeight * 0.85 && connectorBottom > 0) {
            connector.classList.add('visible');
        }
    });
});

function copyAddress(element) {
    const addressText = element.querySelector('.address-text').textContent.trim();
    navigator.clipboard.writeText(addressText).then(() => {
        element.setAttribute('data-copied', 'true');
        const copiedMessage = element.querySelector('.copied-message');
        if (copiedMessage) {
            copiedMessage.style.display = 'block';
            copiedMessage.style.backgroundColor = '#00ff00';
        }
        setTimeout(() => {
            element.setAttribute('data-copied', 'false');
            if (copiedMessage) copiedMessage.style.display = 'none';
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('Clipboard not supported. Copy manually: ' + addressText);
    });
}

function setPhantomLink() {
    const phantomLink = document.getElementById('phantomLink');
    if (!phantomLink) {
        console.error('Phantom link element not found');
        return;
    }
    try {
        const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent);
        phantomLink.href = isMobile && /Android/i.test(navigator.userAgent)
            ? 'https://play.google.com/store/apps/details?id=app.phantom'
            : isMobile
            ? 'https://apps.apple.com/app/phantom-crypto-wallet/id1598432977'
            : 'https://phantom.app/download';
        phantomLink.target = '_blank';
    } catch (error) {
        console.error('Error setting Phantom link:', error);
        phantomLink.href = 'https://phantom.app/'; // Fallback URL
        phantomLink.target = '_blank';
    }
}

function updateTokenomics() {
    const startingSupply = 1000000000;
    const currentSupply = 940543636.05; // Update this manually each Saturday
    const formattedCurrentSupply = currentSupply.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    document.getElementById('current-supply').textContent = `${formattedCurrentSupply} $DEBT`;
    const changePercent = ((currentSupply - startingSupply) / startingSupply * 100).toFixed(2);
    document.getElementById('supply-change').textContent = `${changePercent}%`;
}

function getBadgeDescription(badgeName) {
    const descriptions = {
        'Orbiter': 'Consistently shows up to X Spaces.',
        'Cosmonaut': 'Regularly engages in Spaces conversations.',
        'Star Commander': 'Leads conversations in $DEBT Spaces.',
        'Supernova': 'Hosts $DEBT-focused X Spaces.',
        'Pyro': 'Burned 100,000+ $DEBT.',
        'Arsonist': 'Burned 1,000,000+ $DEBT.',
        'Inferno': 'Burned 10,000,000+ $DEBT.',
        'Ashbringer': 'Burned 100,000,000+ $DEBT.',
        'Cold Wallet': 'Held 1+ month.',
        'Iron Grip': 'Held 3+ months.',
        'Steel Reserve': 'Held 6+ months.',
        'Diamond Hands': 'Held 12+ months.',
        'Cold Blooded Shiller': 'Hardcore $DEBT promoter on social media.',
        'Meme Machine': 'Creates dank $DEBT memes.'
    };
    return descriptions[badgeName] || 'Badge earned for community contributions.';
}

// Community Carousel
let currentCommunityIndex = 0;
const communityMembers = document.querySelectorAll(
    window.innerWidth > 768 ? '.hof-row-desktop .hof-member' : '.hof-row-mobile .hof-member'
);
const totalNamedCommunityMembers = 24; // Only named members, excluding TBA placeholders
const totalCommunityMembers = 24; // Total including TBA placeholders

function updateCommunityCarousel() {
    const sharedTooltip = document.getElementById('shared-tooltip');
    if (sharedTooltip) {
        sharedTooltip.style.display = 'none';
    }
    document.querySelectorAll('.badge.active-tooltip').forEach(el => {
        el.classList.remove('active-tooltip');
    });

    const communityMembers = document.querySelectorAll(
        window.innerWidth > 768 ? '.hof-row-desktop .hof-member' : '.hof-row-mobile .hof-member'
    );
    if (!communityMembers.length) {
        console.error('No community members found for carousel');
        return;
    }

    const featured = document.getElementById('hof-featured');
    const description = document.getElementById('hof-description');
    const currentMember = communityMembers[currentCommunityIndex];
    const xLink = currentMember.getAttribute('data-x-link');

    if (currentCommunityIndex >= totalNamedCommunityMembers) {
        currentCommunityIndex = 0;
    }

    const members = [
        { name: 'Autopsy', title: 'The Visionary', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1748143230/Autopsy2_odqa7c.png', desc: 'Placeholder description for Autopsy.', badges: [{ name: 'Supernova', tier: 'amethyst', type: 'spaces' }, { name: 'Inferno', tier: 'gold', type: 'burn' }, { name: 'Steel Reserve', tier: 'gold', type: 'holding' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }, { name: 'Meme Machine', tier: 'single', type: 'meme' }] },
        { name: 'Catavina', title: 'The Cheerleader', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/catavina_dfcvoe.jpg', desc: 'Placeholder description for Catavina.', badges: [{ name: 'Supernova', tier: 'amethyst', type: 'spaces' }, { name: 'Steel Reserve', tier: 'gold', type: 'holding' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }, { name: 'Meme Machine', tier: 'single', type: 'meme' }] },
        { name: 'Lou', title: 'The Rally', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/lou_r9z01b.jpg', desc: 'Placeholder description for Lou.', badges: [{ name: 'Supernova', tier: 'amethyst', type: 'spaces' }, { name: 'Iron Grip', tier: 'silver', type: 'holding' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }] },
        { name: 'Nerf', title: 'The Professional', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/nerf_vzsf6x.jpg', desc: 'Placeholder description for Nerf.', badges: [{ name: 'Star Commander', tier: 'gold', type: 'spaces' }, { name: 'Steel Reserve', tier: 'gold', type: 'holding' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }] },
        { name: 'JPEG', title: 'The Youngblood', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/jpeg_djfhql.jpg', desc: 'Placeholder description for JPEG.', badges: [{ name: 'Star Commander', tier: 'gold', type: 'spaces' }, { name: 'Steel Reserve', tier: 'gold', type: 'holding' }, { name: "Cold Blooded Shiller", tier: 'single', type: 'shiller' }, { name: 'Meme Machine', tier: 'single', type: 'meme' }] },
        { name: 'Lunicking', title: 'The Spark', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/Lunic_k1ndzn.jpg', desc: 'Placeholder description for Lunicking.', badges: [{ name: 'Steel Reserve', tier: 'gold', type: 'holding' }, { name: 'Orbiter', tier: 'bronze', type: 'spaces' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }, { name: 'Meme Machine', tier: 'single', type: 'meme' }] },
        { name: 'Tormund', title: 'The Oracle', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/Tormund_pj4hwd.jpg', desc: 'Placeholder description for Tormund.', badges: [{ name: 'Steel Reserve', tier: 'gold', type: 'holding' }, { name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }, { name: 'Meme Machine', tier: 'single', type: 'meme' }] },
        { name: 'STAYHIGH', title: 'The Unfiltered', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723031/STAYHIGH_peo1ov.jpg', desc: 'Placeholder description for STAYHIGH.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Iron Grip', tier: 'silver', type: 'holding' }, { name: 'Meme Machine', tier: 'single', type: 'meme' }] },
        { name: 'Renee', title: 'The Support', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747850503/Renee_eekhuh.jpg', desc: 'Placeholder description for Renee.', badges: [{ name: 'Iron Grip', tier: 'silver', type: 'holding' }, { name: 'Orbiter', tier: 'bronze', type: 'spaces' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }] },
        { name: 'blu', title: 'The Warden', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/blu_fko02p.jpg', desc: 'Placeholder description for blu.', badges: [{ name: 'Iron Grip', tier: 'silver', type: 'holding' }, { name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }] },
        { name: 'Scrappy', title: 'The Goofball', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746733145/scrappy_xfukkb.jpg', desc: 'Placeholder description for Scrappy.', badges: [{ name: 'Iron Grip', tier: 'silver', type: 'holding' }, { name: 'Cosmonaut', tier: 'silver', type: 'spaces' }] },
        { name: 'Mo', title: 'The Degen', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747419309/MoDegen_gl6zjo.jpg', desc: 'Placeholder description for Mo.', badges: [{ name: 'Steel Reserve', tier: 'gold', type: 'holding' }] },
        { name: 'Cory B', title: 'The Bengal', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747354104/Cory_qntp8y.jpg', desc: 'Placeholder description for Cory B.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'Dan', title: 'The Vibes', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747354104/Dan_uu4sey.jpg', desc: 'Placeholder description for Dan.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'Tom', title: 'The King', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747354104/Tom_aapace.jpg', desc: 'Placeholder description for Tom.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }, { name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'Marilyn', title: 'The Rockstar', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747354104/Marilyn_agdeot.jpg', desc: 'Placeholder description for Marilyn.', badges: [{ name: 'Cold Wallet', tier: 'bronze', type: 'holding' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }] },
        { name: 'Coinbud', title: 'The Expert', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747354104/Coinbud_uwjumu.jpg', desc: 'Placeholder description for Coinbud.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'ZOMBi', title: 'The Creative', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747354104/ZOMBi_obepxi.jpg', desc: 'Placeholder description for ZOMBi.', badges: [{ name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'Cyanide', title: 'The Poison', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747416884/Cyanide_w72xvh.jpg', desc: 'Placeholder description for Cyanide.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'George', title: 'The Wise', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1747417142/George_q1e0c2.jpg', desc: 'Placeholder description for George.', badges: [{ name: 'Cosmonaut', tier: 'silver', type: 'spaces' }, { name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'Dog', title: 'The Loyal', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1748440557/Dog_iiq5g8.jpg', desc: 'Placeholder description for Dog.', badges: [{ name: 'Cold Wallet', tier: 'bronze', type: 'holding' }, { name: 'Cold Blooded Shiller', tier: 'single', type: 'shiller' }] },
        { name: 'Drinks', title: 'The Party', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1748906211/Drinks_tibhzd.jpg', desc: 'Placeholder description for Drinks.', badges: [{ name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'Ambient', title: 'The Vibe', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1748906930/Ambient_jztyfi.jpg', desc: 'Placeholder description for Ambient.', badges: [{ name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] },
        { name: 'DK', title: 'The Maverick', img: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1748911711/DK_umvnpw.jpg', desc: 'Placeholder description for DK.', badges: [{ name: 'Cold Wallet', tier: 'bronze', type: 'holding' }] }
    ];

    const member = members[currentCommunityIndex];
    const featuredCard = featured.querySelector('.trading-card');
    const pfpLink = featuredCard.querySelector('.pfp-link');
    featuredCard.setAttribute('data-x-link', xLink);
    pfpLink.setAttribute('href', xLink);
    featuredCard.querySelector('.card-pfp-square img').src = member.img;
    featuredCard.querySelector('.card-pfp-square img').alt = `${member.name} profile picture`;
    featuredCard.querySelector('.hof-name').textContent = member.name;

    const badgesContainer = document.getElementById('hof-badges');
    badgesContainer.innerHTML = '';
    if (member.badges && member.badges.length > 0) {
        member.badges.forEach(badge => {
            const badgeEl = document.createElement('div');
            badgeEl.className = `badge badge-${badge.type} badge-${badge.tier}`;
            badgeEl.setAttribute('aria-label', `${badge.name} (${badge.tier} tier)`);
            if (window.innerWidth > 1024) {
                badgeEl.setAttribute('title', `${badge.name}: ${getBadgeDescription(badge.name)}`);
            }

            const emblemImg = document.createElement('img');
            emblemImg.className = 'badge-emblem';
            let emblemSrc = '';
            if (badge.type === 'spaces') {
                if (badge.tier === 'amethyst') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/moonwalker_bdgfiy.png';
                if (badge.tier === 'gold') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/starcommander_knl5nq.png';
                if (badge.tier === 'silver') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/orbitbreaker_dpnr2u.png';
                if (badge.tier === 'bronze') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/zerogravity_b7gsdc.png';
            } else if (badge.type === 'burn') {
                if (badge.tier === 'gold') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/inferno_bj3z5x.png';
                if (badge.tier === 'silver') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/pyromaniac_zqczjd.png';
                if (badge.tier === 'bronze') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/arsonist_ryglvo.png';
            } else if (badge.type === 'holding') {
                if (badge.tier === 'gold') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/steelreserve_xv5krq.png';
                if (badge.tier === 'silver') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/irongrip_ypidgu.png';
                if (badge.tier === 'bronze') emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/coldwallet_y7v5ja.png';
            } else if (badge.type === 'shiller') {
                emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/coldbloodedshiller_bmd8pu.png';
            } else if (badge.type === 'meme') {
                emblemSrc = 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1746723030/mememachine_vazxze.png';
            }
            if (window.innerWidth <= 1024 && emblemSrc) {
                emblemImg.src = emblemSrc;
                emblemImg.alt = `${badge.name} emblem`;
                emblemImg.setAttribute('loading', 'lazy');
                badgeEl.appendChild(emblemImg);
            }

            let sharedTooltip = document.getElementById('shared-tooltip');
            if (!sharedTooltip) {
                sharedTooltip = document.createElement('div');
                sharedTooltip.id = 'shared-tooltip';
                sharedTooltip.className = 'shared-tooltip';
                document.body.appendChild(sharedTooltip);
            }
            badgesContainer.appendChild(badgeEl);
            if (window.innerWidth <= 1024) {
                badgeEl.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.querySelectorAll('.badge.active-tooltip').forEach(el => {
                        if (el !== badgeEl) el.classList.remove('active-tooltip');
                    });
                    badgeEl.classList.toggle('active-tooltip');
                    if (badgeEl.classList.contains('active-tooltip')) {
                        sharedTooltip.textContent = `${badge.name}: ${getBadgeDescription(badge.name)}`;
                        const rect = badgeEl.getBoundingClientRect();
                        sharedTooltip.style.left = `${rect.left + rect.width}px`;
                        sharedTooltip.style.top = `${rect.bottom + 25}px`;
                        sharedTooltip.style.display = 'block';
                    } else {
                        sharedTooltip.style.display = 'none';
                    }
                });
            }
        });
    } else {
        badgesContainer.innerHTML = '<span>No badges yet</span>';
    }

    description.textContent = `Placeholder description for ${member.name}.`;

    communityMembers.forEach((member, index) => {
        const bubble = member.querySelector('.hof-bubble');
        bubble.onclick = () => {
            if (index < totalNamedCommunityMembers) {
                currentCommunityIndex = parseInt(member.getAttribute('data-index'));
                updateCommunityCarousel();
                resetCommunityAutoRotate();
                if (window.innerWidth <= 768) {
                    const featured = document.getElementById('hof-featured');
                    const offset = 60;
                    const featuredPosition = featured.getBoundingClientRect().top + window.pageYOffset;
                    window.scrollTo({
                        top: featuredPosition - offset,
                        behavior: 'smooth'
                    });
                }
            }
        };
        bubble.setAttribute('aria-label', `select ${member.getAttribute('data-name')}`);
    });
}

function rotateHof(direction) {
    if (direction === 'right') {
        currentCommunityIndex = (currentCommunityIndex + 1) % totalNamedCommunityMembers;
    } else if (direction === 'left') {
        currentCommunityIndex = (currentCommunityIndex - 1 + totalNamedCommunityMembers) % totalNamedCommunityMembers;
    }
    updateCommunityCarousel();
    resetCommunityAutoRotate();
}

// Hide tooltip on scroll for mobile
window.addEventListener('scroll', () => {
    if (window.innerWidth <= 1024) {
        const sharedTooltip = document.getElementById('shared-tooltip');
        if (sharedTooltip) {
            sharedTooltip.style.display = 'none';
        }
        document.querySelectorAll('.badge.active-tooltip').forEach(el => {
            el.classList.remove('active-tooltip');
        });
    }
});

function toggleBadgeGlossary() {
    const content = document.getElementById('badgeGlossary');
    const header = content.previousElementSibling;
    const isActive = content.classList.contains('active');
    if (!isActive) {
        content.classList.add('active');
        content.style.maxHeight = `${content.scrollHeight + 30}px`;
        content.style.padding = '15px';
        content.style.opacity = '1';
        header.classList.add('active');
        header.setAttribute('aria-expanded', 'true');
        initializeBadgeGlossaryTooltips();
    } else {
        content.style.maxHeight = '0';
        content.style.padding = '0 15px';
        content.style.opacity = '0';
        setTimeout(() => {
            content.classList.remove('active');
        }, 300);
        header.classList.remove('active');
        header.setAttribute('aria-expanded', 'false');
        const sharedTooltip = document.getElementById('shared-tooltip');
        if (sharedTooltip) {
            sharedTooltip.style.display = 'none';
        }
        document.querySelectorAll('.badge-glossary-content .badge.active-tooltip').forEach(el => {
            el.classList.remove('active-tooltip');
        });
    }
}

function initializeBadgeGlossaryTooltips() {
    const badges = document.querySelectorAll('.badge-glossary-content .badge');
    let sharedTooltip = document.getElementById('shared-tooltip');
    if (!sharedTooltip) {
        sharedTooltip = document.createElement('div');
        sharedTooltip.id = 'shared-tooltip';
        sharedTooltip.className = 'shared-tooltip';
        document.body.appendChild(sharedTooltip);
    }

    badges.forEach(badge => {
        // Remove any existing event listeners to prevent duplicates
        const newBadge = badge.cloneNode(true);
        badge.parentNode.replaceChild(newBadge, badge);

        // Add tap-to-toggle for mobile
        if (window.innerWidth <= 1024) {
            newBadge.addEventListener('click', (e) => {
                e.preventDefault();
                // Close other open tooltips
                document.querySelectorAll('.badge-glossary-content .badge.active-tooltip').forEach(el => {
                    if (el !== newBadge) el.classList.remove('active-tooltip');
                });
                // Toggle tooltip on this badge
                newBadge.classList.toggle('active-tooltip');

                // Position and show shared tooltip
                if (newBadge.classList.contains('active-tooltip')) {
                    sharedTooltip.textContent = newBadge.getAttribute('title');
                    const rect = newBadge.getBoundingClientRect();
                    sharedTooltip.style.left = `${rect.left + rect.width / 2}px`;
                    sharedTooltip.style.top = `${rect.bottom + 25}px`; // Position 25px below badge
                    sharedTooltip.style.display = 'block';
                } else {
                    sharedTooltip.style.display = 'none';
                }
            });
        }
    });
}

// Also call initializeBadgeGlossaryTooltips when opening via FAQ link
function openBadgeGlossary() {
    const content = document.getElementById('badgeGlossary');
    const header = content.previousElementSibling;
    if (!content.classList.contains('active')) {
        content.classList.add('active');
        content.style.maxHeight = `${content.scrollHeight + 30}px`;
        content.style.padding = '15px';
        header.classList.add('active');
        header.setAttribute('aria-expanded', 'true');
        initializeBadgeGlossaryTooltips(); // Initialize tooltips when opening
    }
}

function autoRotateCommunity() {
    currentCommunityIndex = (currentCommunityIndex + 1) % totalNamedCommunityMembers;
    updateCommunityCarousel();
}

let communityAutoRotateInterval = setInterval(autoRotateCommunity, 10000);

function resetCommunityAutoRotate() {
    clearInterval(communityAutoRotateInterval);
    communityAutoRotateInterval = setInterval(autoRotateCommunity, 10000);
}

const communityCarousel = document.querySelector('.hof-carousel');
let communityTouchStartX = 0;
communityCarousel.addEventListener('touchstart', (e) => {
    communityTouchStartX = e.touches[0].clientX;
    clearInterval(communityAutoRotateInterval); // Pause on touch
});
communityCarousel.addEventListener('touchend', (e) => {
    const touchEndX = e.changedTouches[0].clientX;
    if (communityTouchStartX - touchEndX > 50) rotateHof('right');
    if (touchEndX - communityTouchStartX > 50) rotateHof('left');
    resetCommunityAutoRotate(); // Resume after swipe
});
communityCarousel.addEventListener('mousedown', () => {
    clearInterval(communityAutoRotateInterval); // Pause on click
});
communityCarousel.addEventListener('mouseup', () => {
    resetCommunityAutoRotate(); // Resume after click
});

function initializeRoadmapPhases() {
    const isMobile = window.innerWidth <= 768;
    document.querySelectorAll('.future-phase').forEach(phase => {
        // Ensure phases load blurred on both mobile and desktop
        phase.classList.remove('active');
        if (isMobile) {
            localStorage.removeItem(`phase-${phase.querySelector('h2').textContent}`);
        } else {
            // Clear localStorage for desktop on load to ensure blurred state
            localStorage.removeItem(`phase-${phase.querySelector('h2').textContent}`);
        }
        phase.addEventListener('click', () => {
            const isActive = phase.classList.toggle('active');
            // Save state only when toggling
            localStorage.setItem(`phase-${phase.querySelector('h2').textContent}`, isActive);
        });
    });
}

function initializeMatrix() {
    const canvas = document.getElementById('matrix-bg');
    const ctx = canvas.getContext('2d');
    
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        // Recalculate columns for Matrix effect
        columns = Math.ceil(canvas.width / fontSize);
        drops.length = columns;
        for (let i = 0; i < drops.length; i++) {
            if (!drops[i]) drops[i] = 1;
        }
    }
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    window.addEventListener('resize', resizeCanvas);
    
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    const fontSize = 14;
    let columns = Math.ceil(canvas.width / fontSize);
    const drops = Array(columns).fill(1);
    
    function draw() {
        ctx.fillStyle = 'rgba(18, 18, 18, 0.05)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#ff5555';
        ctx.font = `${fontSize}px monospace`;
        
        for (let i = 0; i < drops.length; i++) {
            const text = chars.charAt(Math.floor(Math.random() * chars.length));
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                drops[i] = 0;
            }
            drops[i]++;
        }
    }
    
    setInterval(draw, 50);
}

// Wallet connection logic
const wallets = [
    { name: 'Phantom', id: 'phantom', icon: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1749488428/Phantom_Wallet_s3cahc.jpg' },
    { name: 'Solflare', id: 'solflare', icon: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1749488428/Solflare_Wallet_nxcl95.jpg' },
    { name: 'Backpack', id: 'backpack', icon: 'https://res.cloudinary.com/dpvptjn4t/image/upload/v1750446379/backpack_rer24o.jpg' }
];

function openWalletModal() {
    const walletModal = document.getElementById('walletModal');
    const walletList = document.getElementById('walletList');
    walletList.innerHTML = '';

    wallets.forEach(wallet => {
        const button = document.createElement('button');
        button.className = 'wallet-option';
        button.innerHTML = `
            <img src="${wallet.icon}" alt="${wallet.name} icon" width="30" height="30" style="margin-right: 10px;">
            ${wallet.name}
        `;
        button.style.cssText = 'display: flex; align-items: center; justify-content: center; padding: 10px; width: 100%; background: #333; color: #fff; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; transition: background-color 0.3s;';
        button.onmouseover = () => button.style.background = '#ff5555';
        button.onmouseout = () => button.style.background = '#333';
        button.onclick = () => connectWallet(wallet.id);
        walletList.appendChild(button);
    });

    walletModal.style.display = 'flex';
}

function closeWalletModal() {
    const walletModal = document.getElementById('walletModal');
    walletModal.style.display = 'none';
}

async function connectWallet(walletId) {
    const mobileButton = document.getElementById('connectWalletMobile');
    const desktopBubble = document.getElementById('connectWalletDesktop');
    const walletInfo = document.getElementById('walletInfo');
    const walletAddressEl = document.getElementById('walletAddress').querySelector('span');
    const debtBalanceEl = document.getElementById('debtBalance').querySelector('span');
    closeWalletModal();

    try {
        let provider = null;
        let walletName = 'Unknown Wallet';
        const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent);
        const isInAppBrowser = navigator.userAgent.includes('Phantom') || navigator.userAgent.includes('Solflare') || navigator.userAgent.includes('Backpack');

        const deepLinks = {
            phantom: 'phantom://',
            solflare: 'solflare://',
            backpack: 'backpack://'
        };
        const downloadUrls = {
            phantom: 'https://phantom.app/download',
            solflare: 'https://solflare.com/download',
            backpack: 'https://backpack.app/download'
        };

        if (isMobile && !isInAppBrowser) {
            const wallet = wallets.find(w => w.id === walletId);
            const deepLink = deepLinks[walletId];
            const prompt = `Connect with ${wallet.name}?`;
            if (confirm(prompt)) {
                window.location.href = deepLink;
                setTimeout(() => {
                    if (document.hasFocus()) {
                        window.open(downloadUrls[walletId], '_blank');
                    }
                }, 1000);
            }
            return;
        }

        if (walletId === 'phantom' && (window.solana?.isPhantom || (isInAppBrowser && navigator.userAgent.includes('Phantom')))) {
            provider = window.solana;
            walletName = 'Phantom';
        } else if (walletId === 'solflare' && (window.solflare?.isSolflare || (isInAppBrowser && navigator.userAgent.includes('Solflare')))) {
            provider = window.solflare;
            walletName = 'Solflare';
        } else if (walletId === 'backpack' && window.backpack) {
            provider = window.backpack;
            walletName = 'Backpack';
        } else {
            const wallet = wallets.find(w => w.id === walletId);
            const prompt = `No ${wallet.name} detected. Install it now?`;
            if (confirm(prompt)) {
                window.open(downloadUrls[walletId], '_blank');
            }
            return;
        }

        let publicKey;
        try {
            if (walletId === 'solflare') {
                await provider.connect();
                publicKey = provider.publicKey?.toString();
            } else if (walletId === 'backpack') {
                await provider.connect();
                publicKey = provider.publicKey?.toString();
            } else {
                await provider.connect();
                publicKey = provider.publicKey?.toString();
            }
        } catch (err) {
            throw new Error(`${walletName} connection failed: ${err.message}`);
        }

        if (!publicKey) {
            throw new Error(`Failed to retrieve public key from ${walletName}`);
        }

        if (mobileButton) {
            mobileButton.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
            mobileButton.classList.add('connected');
        }
        if (desktopBubble) {
            desktopBubble.classList.add('connected');
            const span = desktopBubble.querySelector('span');
            span.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
        }

        walletAddressEl.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
        walletInfo.style.display = 'block';

        localStorage.setItem('walletAddress', publicKey);
        localStorage.setItem('walletType', walletId);

        const balance = await getDebtBalance(publicKey);
        debtBalanceEl.textContent = balance;

        console.log(`${walletName} connected:`, publicKey);

        provider.on('accountChanged', async (newPublicKey) => {
            if (newPublicKey) {
                const newKey = newPublicKey.toString();
                walletAddressEl.textContent = `${newKey.slice(0, 4)}...${newKey.slice(-4)}`;
                localStorage.setItem('walletAddress', newKey);
                const balance = await getDebtBalance(newKey);
                debtBalanceEl.textContent = balance;
                console.log(`${walletName} account changed:`, newKey);
            } else {
                disconnectWallet();
            }
        });
    } catch (error) {
        console.error(`Error connecting ${walletId} wallet:`, error);
        alert(`Failed to connect ${walletId}. Ensure your wallet is unlocked and try again.`);
    }
}
function hideWalletInfo() {
    const walletInfo = document.getElementById('walletInfo');
    walletInfo.style.display = 'none';
}
async function disconnectWallet() {
    const mobileButton = document.getElementById('connectWalletMobile');
    const desktopBubble = document.getElementById('connectWalletDesktop');
    const walletInfo = document.getElementById('walletInfo');
    const walletType = localStorage.getItem('walletType');

    try {
        let provider = null;
        if (walletType === 'phantom' && window.solana?.isPhantom) {
            provider = window.solana;
        } else if (walletType === 'solflare' && window.solflare?.isSolflare) {
            provider = window.solflare;
        } else if (walletType === 'backpack' && window.backpack) {
            provider = window.backpack;
        }

        if (provider && provider.disconnect) {
            await provider.disconnect();
        }

        if (mobileButton) {
            mobileButton.textContent = 'Select Wallet';
            mobileButton.classList.remove('connected');
        }
        if (desktopBubble) {
            desktopBubble.classList.remove('connected');
            const span = desktopBubble.querySelector('span');
            span.textContent = 'Select Wallet';
        }
        walletInfo.style.display = 'none';
        localStorage.removeItem('walletAddress');
        localStorage.removeItem('walletType');
        console.log('Wallet disconnected');
    } catch (error) {
        console.error('Error disconnecting wallet:', error);
        alert('Failed to disconnect wallet. Please try again.');
    }
}

async function getDebtBalance(publicKey) {
    try {
        const apiKey = 'c57c8d55-3e55-4160-9d8c-00df2c3fb22e';
        const url = `https://api.helius.xyz/v0/addresses/${publicKey}/balances?api-key=${apiKey}`;
        
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        const token = data.tokens.find(t => t.mint === '9NQc7BnhfLbNwVFXrVsymEdqEFRuv5e1k7CuQW82pump');
        
        if (token && token.amount) {
            const balance = token.amount / Math.pow(10, token.decimals);
            console.log('Token balance:', balance);
            return `${balance.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} $DEBT`;
        } else {
            console.log('No $DEBT token found.');
            return '0 $DEBT';
        }
    } catch (error) {
        console.error('Error fetching $DEBT balance:', error.message);
        return '0 $DEBT';
    }
}

function startMatrixRain() {
    const rainCanvas = document.getElementById('matrix-rain');
    const rainCtx = rainCanvas.getContext('2d');
    rainCanvas.height = window.innerHeight;
    rainCanvas.width = window.innerWidth;
    const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const fontSize = 14;
    const columns = rainCanvas.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);
    function drawRain() {
        rainCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
        rainCtx.fillRect(0, 0, rainCanvas.width, rainCanvas.height);
        rainCtx.fillStyle = '#999999';
        rainCtx.font = fontSize + 'px monospace';
        drops.forEach((y, i) => {
            const text = chars.charAt(Math.floor(Math.random() * chars.length));
            rainCtx.fillText(text, i * fontSize, y * fontSize);
            if (y * fontSize > rainCanvas.height && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        });
    }
    setInterval(drawRain, 50); // Keep at 50ms
    window.addEventListener('resize', () => {
        rainCanvas.height = window.innerHeight;
        rainCanvas.width = window.innerWidth;
    });
}

// Audio Player Logic
const playlist = [
  {
    title: "KABOOM!",
    artist: "Ambient Sound", 
    src: "https://res.cloudinary.com/dpvptjn4t/video/upload/v1751151702/KABOOM_pac3lb.wav"
  },
  {
    title: "D.E.B.T.",
    artist: "Ambient Sound", 
    src: "https://res.cloudinary.com/dpvptjn4t/video/upload/v1751153796/D.E.B.T._nkijpl.wav"
  },
  {
    title: "Burn",
    artist: "Ambient Sound", 
    src: "https://res.cloudinary.com/dpvptjn4t/video/upload/v1751151703/Burn_c7qcmi.wav"
  },
  {
    title: "Freedom Fighters",
    artist: "Ambient Sound", 
    src: "https://res.cloudinary.com/dpvptjn4t/video/upload/v1751151703/Freedom_Fighters_somsv2.wav"
  },
  {
    title: "Get Out",
    artist: "Ambient Sound", 
    src: "https://res.cloudinary.com/dpvptjn4t/video/upload/v1751151703/Get_Out_oor74k.wav"
  }
];
let currentTrackIndex = 0;

function initializeAudioPlayer() {
  const audio = document.getElementById('audio');
  const playPauseBtn = document.getElementById('play-pause');
  const prevTrackBtn = document.getElementById('prev-track');
  const nextTrackBtn = document.getElementById('next-track');
  const playPauseBtnMobile = document.getElementById('play-pause-mobile');
  const prevTrackBtnMobile = document.getElementById('prev-track-mobile');
  const nextTrackBtnMobile = document.getElementById('next-track-mobile');
  const audioPlayer = document.getElementById('audio-player');
  const audioPlayerMobile = document.getElementById('audioPlayerMobile');
  const logoBtn = document.getElementById('logo-btn');
  const trackInfoSpan = document.getElementById('track-info').querySelector('span');
  const trackInfoMobileSpan = document.getElementById('track-info-mobile').querySelector('span');

  function loadTrack(index) {
    audio.src = playlist[index].src;
    audio.load();
    playPauseBtn.className = 'audio-btn play';
    playPauseBtnMobile.className = 'audio-btn play';
    audioPlayerMobile.classList.remove('playing');
    trackInfoSpan.textContent = `${playlist[index].title} - ${playlist[index].artist}`;
    trackInfoMobileSpan.textContent = `${playlist[index].title} - ${playlist[index].artist}`;
    trackInfoSpan.style.animationPlayState = 'running';
    trackInfoMobileSpan.style.animationPlayState = 'running';
    audio.play().catch(err => {
      console.error('Auto-play failed:', err);
      playPauseBtn.className = 'audio-btn play';
      playPauseBtnMobile.className = 'audio-btn play';
      audioPlayerMobile.classList.remove('playing');
      trackInfoSpan.style.animationPlayState = 'paused';
      trackInfoMobileSpan.style.animationPlayState = 'paused';
    });
}
  function togglePlayPause() {
    if (audio.paused) {
      audio.play().catch(err => {
        console.error('Play failed:', err);
        playPauseBtn.className = 'audio-btn play';
        playPauseBtnMobile.className = 'audio-btn play';
        audioPlayerMobile.classList.remove('playing');
        trackInfoSpan.style.animationPlayState = 'paused';
        trackInfoMobileSpan.style.animationPlayState = 'paused';
      });
      playPauseBtn.className = 'audio-btn pause';
      playPauseBtnMobile.className = 'audio-btn pause';
      audioPlayerMobile.classList.add('playing');
      trackInfoSpan.style.animationPlayState = 'running';
      trackInfoMobileSpan.style.animationPlayState = 'running';
    } else {
      audio.pause();
      playPauseBtn.className = 'audio-btn play';
      playPauseBtnMobile.className = 'audio-btn play';
      audioPlayerMobile.classList.remove('playing');
      trackInfoSpan.style.animationPlayState = 'paused';
      trackInfoMobileSpan.style.animationPlayState = 'paused';
    }
  }

  function toggleAudioPlayer() {
    const isActive = audioPlayer.classList.toggle('active');
    logoBtn.classList.toggle('active', isActive);
    logoBtn.setAttribute('aria-expanded', isActive);
    if (isActive && !audio.src) {
      loadTrack(currentTrackIndex);
    }
}

    logoBtn.addEventListener('click', toggleAudioPlayer);
  audioPlayerMobile.addEventListener('click', toggleAudioPlayer);
  playPauseBtn.addEventListener('click', togglePlayPause);
  playPauseBtnMobile.addEventListener('click', togglePlayPause);
  prevTrackBtn.addEventListener('click', () => {
    currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
    loadTrack(currentTrackIndex);
  });
  prevTrackBtnMobile.addEventListener('click', () => {
    currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
    loadTrack(currentTrackIndex);
  });
  nextTrackBtn.addEventListener('click', () => {
    currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    loadTrack(currentTrackIndex);
  });
  nextTrackBtnMobile.addEventListener('click', () => {
    currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    loadTrack(currentTrackIndex);
  });
  audio.addEventListener('ended', () => {
    console.log('Audio ended, currentTrackIndex:', currentTrackIndex, 'Moving to:', (currentTrackIndex + 1) % playlist.length);
    currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    loadTrack(currentTrackIndex);
});
  audio.addEventListener('error', (e) => {
    console.error('Audio error:', e);
    currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    loadTrack(currentTrackIndex);
  });

    // Ensure marquee syncs with play state
  audio.addEventListener('play', () => {
    playPauseBtn.className = 'audio-btn pause';
    playPauseBtnMobile.className = 'audio-btn pause';
    trackInfoSpan.style.animationPlayState = 'running';
  });
  audio.addEventListener('pause', () => {
    playPauseBtn.className = 'audio-btn play';
    playPauseBtnMobile.className = 'audio-btn play';
    trackInfoSpan.style.animationPlayState = 'paused';
  });

    // Keyboard accessibility
  logoBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleAudioPlayer();
    }
  });
  audioPlayerMobile.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleAudioPlayer();
    }
  });
  playPauseBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      togglePlayPause();
    }
  });
  playPauseBtnMobile.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      togglePlayPause();
    }
  });
  prevTrackBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
      loadTrack(currentTrackIndex);
    }
  });
  prevTrackBtnMobile.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
      loadTrack(currentTrackIndex);
    }
  });
  nextTrackBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
      loadTrack(currentTrackIndex);
    }
  });
  nextTrackBtnMobile.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
      loadTrack(currentTrackIndex);
    }
  });
}
window.addEventListener('load', async () => {
  initializeAudioPlayer();
    if (typeof solanaWeb3 === 'undefined') {
        console.error('solanaWeb3 library is not loaded. Please include it via CDN.');
    }
    console.log('Load event fired');
    initializeMatrix(); // Red matrix
    startMatrixRain(); // Grey matrix
    setPhantomLink();
    updateTokenomics();
    updateCommunityCarousel();
    initializeRoadmapPhases();
    window.dispatchEvent(new Event('scroll'));
    const mobileButton = document.getElementById('connectWalletMobile');
    const desktopBubble = document.getElementById('connectWalletDesktop');
    mobileButton.addEventListener('click', () => {
        if (mobileButton.classList.contains('connected')) {
            const walletInfo = document.getElementById('walletInfo');
            walletInfo.style.display = walletInfo.style.display === 'block' ? 'none' : 'block';
        } else {
            openWalletModal();
        }
    });
    desktopBubble.addEventListener('click', () => {
        if (desktopBubble.classList.contains('connected')) {
            const walletInfo = document.getElementById('walletInfo');
            walletInfo.style.display = walletInfo.style.display === 'block' ? 'none' : 'block';
        } else {
            openWalletModal();
        }
    });

    try {
        const walletType = localStorage.getItem('walletType');
        const walletAddress = localStorage.getItem('walletAddress');
        if (walletType && walletAddress) {
            let provider = null;
            let walletName = 'Unknown Wallet';
            if (walletType === 'phantom' && window.solana?.isPhantom) {
                provider = window.solana;
                walletName = 'Phantom';
            } else if (walletType === 'solflare' && window.solflare?.isSolflare) {
                provider = window.solflare;
                walletName = 'Solflare';
            } else if (walletType === 'backpack' && window.backpack) {
                provider = window.backpack;
                walletName = 'Backpack';
            }

            if (provider) {
                let publicKey;
                if (walletType === 'solflare') {
                    await provider.connect({ onlyIfTrusted: true });
                    publicKey = provider.publicKey?.toString();
                } else {
                    const response = await provider.request({ method: 'connect', params: { onlyIfTrusted: true } });
                    publicKey = response.publicKey?.toString() || provider.publicKey?.toString();
                }

                if (publicKey && publicKey === walletAddress) {
                    const walletInfo = document.getElementById('walletInfo');
                    const walletAddressEl = document.getElementById('walletAddress').querySelector('span');
                    const debtBalanceEl = document.getElementById('walletInfo').querySelector('#debtBalance span');

                    mobileButton.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                    mobileButton.classList.add('connected');
                    desktopBubble.classList.add('connected');
                    desktopBubble.querySelector('span').textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                    walletAddressEl.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                    walletInfo.style.display = 'none';

                    const balance = await getDebtBalance(publicKey);
                    debtBalanceEl.textContent = balance;

                    console.log(`Restored ${walletName} connection:`, publicKey);
                }
            }
        }
    } catch (error) {
        console.error('Error restoring wallet connection:', error);
    }
});

function toggleSocialBubbles() {
    const container = document.querySelector('.join-rebellion-container');
    const button = document.querySelector('.join-rebellion');
    const bubbles = document.querySelector('.social-bubbles');
    if (!container || !button || !bubbles) {
        console.error('ToggleSocialBubbles: Element not found', { container, button, bubbles });
        return;
    }
    const isActive = bubbles.classList.toggle('active');
    button.classList.toggle('active', isActive);
    button.setAttribute('aria-expanded', isActive);
    console.log('ToggleSocialBubbles: isActive =', isActive, 'Bubbles classList =', bubbles.classList.toString());
}

function featureHost(hostName) {
    const memberIndex = {
        'Autopsy': 0,
        'Catavina': 1,
        'Lou': 2
    };
    currentCommunityIndex = memberIndex[hostName] || 0;
    updateCommunityCarousel();
    resetCommunityAutoRotate();
    const featured = document.getElementById('hof-featured');
    const offset = 60; // Account for header
    const featuredPosition = featured.getBoundingClientRect().top + window.pageYOffset;
    window.scrollTo({
        top: featuredPosition - offset,
        behavior: 'smooth'
    });
}
</script>
</html>

</html>
